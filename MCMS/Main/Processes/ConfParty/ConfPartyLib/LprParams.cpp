
#include <limits.h>
#include "ConfPartyDefines.h"


// LPR parameter table
LPRRateParams gLPRParamTable[] = {


    // 0% protection, MTBF = 0 (default)
    { 0, 0,
        {
            //        rate   D  R   len   per   mtbf
            {            0,  1, 0,  1260,  0,   0},
            {      INT_MAX,  1, 0,  1260,  0,   0}
        }
    },

    // 2% protection, MTBF >= 800 mS
    { 2, 800,
        {
            //        rate   D  R   len    per   mtbf
            {            0, 1,  0,  1260,   0,   0},
            {           64, 2,  1,   501,  125,  126689}, 
            {          128, 4,  1,   501,  125,  32531},
            {          256, 7,  1,   458,  100,  9675},
            {          384, 11, 1,   437,  100,  4327},
            {          512, 13, 1,   493,  100,  3222},
            {          768, 16, 1,   601,  100,  2242},
            {         1024, 22, 1,   582,  100,  1303},
            {         2048, 22, 2,   582,   50,  4227},
            {         3072, 32, 2,   601,   50,  1656},
            {         4096, 42, 2,   610,   50,  865},
            {      INT_MAX, 42, 2,   610,   50,  865}
        }
    },
    // 3% protection, MTBF >= 600 seconds
    { 3, 600000,
        {
            //        rate   D  R   len    per   mtbf
            {            0,  1, 0,  1260,    0,  0},
            {           64,  2, 2,   601,  150,  1420858},
            {          128,  5, 3,   481,  150,  2915030},
            {          256,  9, 4,   445,  125,  4891674},
            {          384, 11, 4,   437,  100,  1763681},
            {          512, 13, 4,   493,  100,  899995},
            {          768, 16, 5,   601,  100,  3730695},
            {         1024, 19, 5,   674,  100,  1625161},
            {         2048, 19, 5,   674,   50,  812580},
            {         3072, 32, 7,   601,   50,  2850170},
            {         4096, 42, 8,   610,   50,  3093466},
            {      INT_MAX, 42, 8,   610,   50,  3093466}
        }
    },
    // 5% protection, MTBF >= 800 mS
    { 5, 800,
        {
            //        rate   D  R   len   per  mtbf
            {            0,  1, 0,  1260,   0,  0},
            {           64, 13, 4,   87,  113, 2067},
            {          128, 12, 4,  133,  100, 1795},
            {          256, 12, 4,  266,  100, 1795},
            {          384, 12, 4,  400,  100, 1795},
            {          512, 12, 4,  533,  100, 1795},
            {          768, 12, 4,  800,  100, 1795},
            {         1024, 16, 5,  800,  100,  870},
            {         2048, 16, 5,  800,   50, 1158},
            {         3072, 32, 9,  627,   75, 837133},
            {         4096, 42, 10,  610,  75, 837133},
            {      INT_MAX, 42, 10,  610,  75, 837133}
        }
    },
    // 7% protection, MTBF >= 1000 mS
    { 7, 1000,
        {
            //        rate   D  R   len    per  mtbf
            {            0,  1, 0,  1260,    0, 0},
            {           64,  2, 1,   501,  125, 8919},
            {          128,  4, 1,   501,  125, 2941},
            {          256,  7, 1,   458,  100, 966},
            {          384, 11, 2,   437,  100, 1731},
            {          512, 13, 2,   533,  100, 1206},
            {          768, 13, 2,   739,  100, 1206},
            {         1024, 16, 3,   801,  100, 2509},
            {         2048, 16, 3,   801,   50, 1254},
            {         3072, 32, 5,   601,   50, 1190},
            {         4096, 42, 6,   610,   50, 1032},
            {      INT_MAX, 42, 6,   610,   50, 1032}
        }
    },
    // 10% protection, MTBF >= 800 mS
    { 10, 800,
        {
            //        rate   D  R   len   per   mtbf
            {            0,  1, 0,  1260,    0, 0},
            {           64, 13, 3,    87,  113, 2067},
            {          128, 12, 3,   133,  100, 1795},
            {          256, 12, 3,   266,  100, 1795},
            {          384, 12, 3,   400,  100, 1795},
            {          512, 12, 3,   533,  100, 1795},
            {          768, 12, 3,   800,  100, 1795},
            {         1024, 16, 3,   800,  100,  870},
            {         2048, 16, 4,   800,   50, 1158},
            {         3072, 24, 6,   800,   50, 1936},
            {         4096, 32, 7,   800,   50, 1365},
            {      INT_MAX, 32, 7,   800,   50, 1365}
        }
    },



    {100, 0, {{0, 0, 0, 0, 0, 0}}}
};

int gLPRParamTableSize = sizeof(gLPRParamTable);

// our max parameters
LPRParams gLPRMaxParamTable =
{
    4096,               // max bit rate in Kbps 
    42,                 // max number of data packets in the group
    10,                 // max number of recovery packets in the group
    1260,               // max packet length in bytes
    150,                // max protection period in mS 
    600000              // max mean time between failure in mS 
};

